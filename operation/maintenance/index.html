<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Lido for Solana Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Lido for Solana Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">Maintenance | Lido for Solana</title><meta data-react-helmet="true" property="og:url" content="https://docs.solana.lido.fi//operation/maintenance"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Maintenance | Lido for Solana"><meta data-react-helmet="true" name="description" content="Some tasks in Solido, such as claiming staking rewards, need to happen"><meta data-react-helmet="true" property="og:description" content="Some tasks in Solido, such as claiming staking rewards, need to happen"><link data-react-helmet="true" rel="shortcut icon" href="/img/stSOL.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.solana.lido.fi//operation/maintenance"><link data-react-helmet="true" rel="alternate" href="https://docs.solana.lido.fi//operation/maintenance" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.solana.lido.fi//operation/maintenance" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8ab0f3ac.css">
<link rel="preload" href="/assets/js/runtime~main.6eb97f35.js" as="script">
<link rel="preload" href="/assets/js/main.468d7ac7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/stSOL.svg" alt="Lido for Solana Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/stSOL.svg" alt="Lido for Solana Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Lido for Solana</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://medium.com/chorus-one/introducing-lido-for-solana-8aa02db8503" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://github.com/chorusone/solido" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/stSOL.svg" alt="Lido for Solana Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/stSOL.svg" alt="Lido for Solana Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Lido for Solana</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://medium.com/chorus-one/introducing-lido-for-solana-8aa02db8503" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://github.com/chorusone/solido" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Staking</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/overview">Staking Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/phantom">Phantom</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/solflare">Solflare</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/ledger">Ledger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/Sollet">Sollet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/solong">Solong</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/stSOL-Saber-pool">Investing stSOL in Saber</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/Orca-pool-Wormhole-guide">Wormhole Guide (Orca Pool)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/migrate-aux-to-ata-guide">ATA Migration Guide</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/governance">Governance</a></li><li class="menu__list-item"><a class="menu__link" href="/administration">Administration</a></li><li class="menu__list-item"><a class="menu__link" href="/fees">Fees</a></li><li class="menu__list-item"><a class="menu__link" href="/validator-onboarding">Validator onboarding</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Operation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/operation/the-solido-utility">The Solido utility</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/operation/maintenance">Maintenance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/operation/multisig-guide">Multisig guide</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/development">Development Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/building-docker-image">Buiding a Docker image locally</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/frontend-integration">Integrating with Lido</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/price-oracle">Price oracle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/reproducibility">Reproducibility</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">specification</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/specification">Specification Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">cli</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/cli/cli">cli</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">multisig</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/multisig/multisig">multisig</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">solido</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/solido">Solido</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/account_map">Account Map</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/balance">Balance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/entrypoint">Entrypoint</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/error">Error</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/instruction">Instruction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/lib">Lib</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/logic">Logic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/process_management">Process Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/processor">Process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/state">State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/solido/token">Token</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Internals</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/internals/solana-staking">Staking on Solana</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/internals/commission">Commission</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/internals/withdrawals">Withdrawals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/internals/exchange-rate">Exchange rate</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/deployments">Deployments</a></li><li class="menu__list-item"><a class="menu__link" href="/security">Security</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Maintenance</h1></header><div class="markdown"><p>Some tasks in Solido, such as claiming staking rewards, need to happen
periodically. We refer to these as <em>maintenance</em> tasks. The maintenance daemon
(also called “bot”) watches the on-chain state, and executes maintenance tasks
as necessary. It is fine, and even encouraged for redundancy, if multiple
parties run a maintenance daemon.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="trusted-maintainers"></a>Trusted maintainers<a class="hash-link" href="#trusted-maintainers" title="Direct link to heading">#</a></h2><p>Most maintenance tasks can be executed by anybody. However, staking deposits is
limited to a list of <em>maintainers</em> at the moment. This simplifies the on-chain
program, but it also gives maintainers great power and responsibility over the
stake distribution. The maintenance daemon that maintainers are expected to use,
targets a uniform stake distribution, but maintainers in theory have the power
to disturb this balance. We plan to move the stake distribution logic into the
on-chain program in a future version, to eliminate the need for trusted
maintainers.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="maintainer-operators"></a>Maintainer operators<a class="hash-link" href="#maintainer-operators" title="Direct link to heading">#</a></h2><p>Most of the Solido maintenance tasks can be executed by anybody, but there still
needs to be <em>somebody</em> who submits the transaction. The maintenance bot
automates this. The bot will also execute maintenance tasks that are restricted
to the set of trusted maintainers. For v1 the set of trusted maintainers who run
the bot consists of validators who are also part of the multisig:</p><ul><li>Chorus One</li><li>Figment</li><li>P2P</li><li>Staking Facilities</li></ul><p>Uptime of the maintenance bot is not critical. As long as <em>somebody</em> at least
briefly runs the bot once every epoch, Solido will work fine. Because multiple
parties run an instance, it is okay if an instance is inactive for a bit (e.g.
to reboot the host).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="obtaining-the-maintenance-daemon"></a>Obtaining the maintenance daemon<a class="hash-link" href="#obtaining-the-maintenance-daemon" title="Direct link to heading">#</a></h2><p>The maintenance daemon is part of the <code>solido</code> utility. You can either build
it from source with Cargo, or use the <a href="https://hub.docker.com/r/chorusone/solido-maintainer" target="_blank" rel="noopener noreferrer"><code>chorusone/solido-maintainer</code></a>
container image that includes a prebuilt version.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="running-the-maintenance-daemon"></a>Running the maintenance daemon<a class="hash-link" href="#running-the-maintenance-daemon" title="Direct link to heading">#</a></h2><p>The maintenance daemon is part of the <code>solido</code> utility and can be started with
the <code>run-maintainer</code> subcommand. Like all <code>solido</code> commands, it can be
configured either on the command line, with a json config file, or through
environment variables. See also <a href="/operation/the-solido-utility#configuration">the section on <code>solido</code> configuration</a>
See <code>solido --help</code> and <code>solido run-maintainer --help</code> for the options specific
to <code>run-maintainer</code>. Beware that:</p><ul><li><p>The public Solana RPC endpoints are rate-limited, and require trusting the
server. If possible, point <code>--cluster</code> at the RPC endpoint of your own
validator, instead of a public one like
<code>https://api.mainnet-beta.solana.com</code>.</p></li><li><p>The key used to sign (configured with <code>--keypair-path</code>) needs to be listed as
a maintainer in the Solido instance. You can view the list of maintainers
with <code>solido show-solido</code>. The account needs to be funded, as it pays for the
transaction fees of maintenance transactions.</p></li></ul><p>When running, the maintenance daemon periodically polls the on-chain state, and
executes maintenances transactions if necessary. It also exposes an http server
that serves a Prometheus <code>/metrics</code> endpoint. These metrics include both metrics
about Solido in general (extracted from the on-chain state), and metrics about
the daemon. The following metrics are useful for monitoring:</p><ul><li><p><code>solido_maintainer_balance_sol</code>: The balance of the maintainer account
(configured with <code>--keypair-path</code>). You can alert on this value dropping
below e.g. 0.1 SOL; to top up the account in a timely fashion.</p></li><li><p><code>solido_maintenance_polls_total</code>: The number of times we refreshed the
on-chain state. If this value stops increasing, something is wrong.</p></li><li><p><code>solido_maintenance_errors_total</code>: The number of times we encountered an
error. If the rate of this metric gets close to the poll rate, that means
most iterations are failing, and investigation is needed. Occasional errors
are expected, especially when using a public RPC endpoint.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="claiming-validation-fees"></a>Claiming validation fees<a class="hash-link" href="#claiming-validation-fees" title="Direct link to heading">#</a></h2><p>For <a href="/internals/commission#validation-fee-credit">technical reasons</a>, Solido
holds on to any validation fees until the validator withdraws them into the
validator’s stSOL account; they are not paid into the account automatically by
the on-chain program. To alleviate this, the maintenance bot will withdraw the
rewards automatically for all validators, into their stSOL accounts.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/operation/the-solido-utility"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« The Solido utility</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/operation/multisig-guide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Multisig guide »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#trusted-maintainers" class="table-of-contents__link">Trusted maintainers</a></li><li><a href="#maintainer-operators" class="table-of-contents__link">Maintainer operators</a></li><li><a href="#obtaining-the-maintenance-daemon" class="table-of-contents__link">Obtaining the maintenance daemon</a></li><li><a href="#running-the-maintenance-daemon" class="table-of-contents__link">Running the maintenance daemon</a></li><li><a href="#claiming-validation-fees" class="table-of-contents__link">Claiming validation fees</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.6eb97f35.js"></script>
<script src="/assets/js/main.468d7ac7.js"></script>
</body>
</html>