<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Lido for Solana Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Lido for Solana Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">state | Lido for Solana</title><meta data-react-helmet="true" property="og:url" content="https://docs.solana.lido.fi//development/specification/solido/state"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="state | Lido for Solana"><meta data-react-helmet="true" name="description" content="Specification of the state.rs module"><meta data-react-helmet="true" property="og:description" content="Specification of the state.rs module"><meta data-react-helmet="true" name="keywords" content="development,developers,lido,specification,intent,state,solido,solana"><link data-react-helmet="true" rel="shortcut icon" href="/img/stSOL.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.solana.lido.fi//development/specification/solido/state"><link data-react-helmet="true" rel="alternate" href="https://docs.solana.lido.fi//development/specification/solido/state" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.solana.lido.fi//development/specification/solido/state" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8ab0f3ac.css">
<link rel="preload" href="/assets/js/runtime~main.5fa1bcba.js" as="script">
<link rel="preload" href="/assets/js/main.9e9a9979.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/stSOL.svg" alt="Lido for Solana Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/stSOL.svg" alt="Lido for Solana Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Lido for Solana</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://medium.com/chorus-one/introducing-lido-for-solana-8aa02db8503" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://github.com/chorusone/solido" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/stSOL.svg" alt="Lido for Solana Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/stSOL.svg" alt="Lido for Solana Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Lido for Solana</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://medium.com/chorus-one/introducing-lido-for-solana-8aa02db8503" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://github.com/chorusone/solido" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Staking</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/overview">Staking Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/phantom">Phantom</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/solflare">Solflare</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/ledger">Ledger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/Sollet">Sollet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking/solong">Solong</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/governance">Governance</a></li><li class="menu__list-item"><a class="menu__link" href="/administration">Administration</a></li><li class="menu__list-item"><a class="menu__link" href="/fees">Fees</a></li><li class="menu__list-item"><a class="menu__link" href="/validator-onboarding">Validator onboarding</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Operation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operation/the-solido-utility">The Solido utility</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operation/maintenance">Maintenance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/operation/multisig-guide">Multisig guide</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/development">Development Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/building-docker-image">Buiding a Docker image locally</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/frontend-integration">Integrating with Lido</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/price-oracle">Price oracle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/reproducibility">Reproducibility</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">specification</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/specification">Specification Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">cli</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/cli/cli">cli</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">multisig</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/development/specification/multisig/multisig">multisig</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">solido</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/solido">Solido</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/account_map">Account Map</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/balance">Balance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/entrypoint">Entrypoint</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/error">Error</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/instruction">Instruction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/lib">Lib</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/logic">Logic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/process_management">Process Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/processor">Process</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/development/specification/solido/state">State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/development/specification/solido/token">Token</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Internals</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/internals/solana-staking">Staking on Solana</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/internals/commission">Commission</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/internals/withdrawals">Withdrawals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/internals/exchange-rate">Exchange rate</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/deployments">Deployments</a></li><li class="menu__list-item"><a class="menu__link" href="/security">Security</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">State</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="constants"></a>Constants<a class="hash-link" href="#constants" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="lido_version"></a>LIDO_VERSION<a class="hash-link" href="#lido_version" title="Direct link to heading">#</a></h3><p>This byte specifies the version of the Solido state.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub const LIDO_VERSION: u8 = 0;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="lido_constant_header_size"></a>LIDO_CONSTANT_HEADER_SIZE<a class="hash-link" href="#lido_constant_header_size" title="Direct link to heading">#</a></h3><p>This defines the size of the header of the Solido state.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub const LIDO_CONSTANT_HEADER_SIZE: usize = 1 + 2 * 32 + 8 + 2;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The header size should be equivalent to the following:</p><ul><li>the size of the version byte</li><li>the size of the manager and st_sol_mint public keys</li><li>the size of the st_sol_total_shares which is an stLamports struct</li><li>the size of the sol_reserve_authority_bump_seed and the deposit_authority_bump_seed</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="lido_constant_fee_size"></a>LIDO_CONSTANT_FEE_SIZE<a class="hash-link" href="#lido_constant_fee_size" title="Direct link to heading">#</a></h3><p>This defines the size of the fee section of the Lido state.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub const LIDO_CONSTANT_FEE_SIZE: usize = 2 * 32 + 3 * 4;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This should be equivalent to the following:</p><ul><li>the size of the FeeDistribution struct</li><li>the size of the FeeRecipients struct</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="types"></a>Types<a class="hash-link" href="#types" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="validators"></a>Validators<a class="hash-link" href="#validators" title="Direct link to heading">#</a></h3><p>The validators type uses the <a href="/development/specification/solido/account_map#AccountMap">AccountMap</a> struct and the <a href="/development/specification/solido/state#Validator">Validator</a> struct to create a helper type to assist in dealing with the collection of validators needed for the Soldio state.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub type Validators = AccountMap&lt;Validator&gt;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="maintainers"></a>Maintainers<a class="hash-link" href="#maintainers" title="Direct link to heading">#</a></h3><p>The Maintainers type leverages a type alias, <a href="/development/specification/solido/account_map#AccountSet">AccountSet</a>, for an <a href="/development/specification/solido/account_map#AccountMap">AccountMap</a> with a unit type.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub type Maintainers = AccountSet;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="structs"></a>Structs<a class="hash-link" href="#structs" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="lido"></a>Lido<a class="hash-link" href="#lido" title="Direct link to heading">#</a></h3><p>This is the main structure for maintaining the Solido state.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub struct Lido {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub lido_version: u8,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub manager: Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub st_sol_mint: Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub st_sol_total_shares: StLamports,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub sol_reserve_authority_bump_seed: u8,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub deposit_authority_bump_seed: u8,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub fee_distribution: FeeDistribution,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub fee_recipients: FeeRecipients,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub validators: Validators,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub maintainers: Maintainers,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="implemented-functions-on-lido"></a>Implemented functions on Lido<a class="hash-link" href="#implemented-functions-on-lido" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="calculate_size"></a>calculate_size<a class="hash-link" href="#calculate_size" title="Direct link to heading">#</a></h5><p>This function calculates the size of the Solido state <em>if</em> it had the maximum number of validators and maintainers.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn calculate_size(max_validators: u32, max_maintainers: u32) -&gt; usize {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="calc_pool_tokens_for_deposit"></a>calc_pool_tokens_for_deposit<a class="hash-link" href="#calc_pool_tokens_for_deposit" title="Direct link to heading">#</a></h5><p>This function calculates the correct amount of pool tokens, stSOL, for a given stake deposit in SOL.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>equivalentÂ poolÂ tokenÂ (stLamports)</mtext><mo>=</mo><mtext>stakeÂ equivalentÂ inÂ stLamports</mtext><mo>âˆ—</mo><mfrac><mtext>TotalÂ SharesÂ stLamports</mtext><mtext>TotalÂ Lamports</mtext></mfrac></mrow><annotation encoding="application/x-tex">\textnormal{equivalent pool token (stLamports)}=\textnormal{stake equivalent in stLamports}*\frac{\textnormal{Total Shares stLamports}}{\textnormal{Total Lamports}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord textrm">equivalentÂ poolÂ tokenÂ (stLamports)</span></span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em"></span><span class="mord text"><span class="mord textrm">stakeÂ equivalentÂ inÂ stLamports</span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:2.25188em;vertical-align:-0.8804400000000001em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714399999999998em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord textrm">TotalÂ Lamports</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord textrm">TotalÂ SharesÂ stLamports</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804400000000001em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn calc_pool_tokens_for_deposit(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &amp;self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    stake_lamports: Lamports,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    total_lamports: Lamports,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; Option&lt;StLamports&gt; {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="is_initialized"></a>is_initialized<a class="hash-link" href="#is_initialized" title="Direct link to heading">#</a></h5><p>Checks if the instance of Solido has already been initialized.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn is_initialized(&amp;self) -&gt; ProgramResult {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="check_mint_is_st_sol_mint"></a>check_mint_is_st_sol_mint<a class="hash-link" href="#check_mint_is_st_sol_mint" title="Direct link to heading">#</a></h5><p>Confirms that the passed mint account is indeed Solido&#x27;s expected stSOL mint.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn check_mint_is_st_sol_mint(&amp;self, mint_account_info: &amp;AccountInfo) -&gt; ProgramResult {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="check_is_st_sol_account"></a>check_is_st_sol_account<a class="hash-link" href="#check_is_st_sol_account" title="Direct link to heading">#</a></h5><p>Confirms that the given account is an SPL token account with our stSOL mint as mint.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn check_is_st_sol_account(&amp;self, token_account_info: &amp;AccountInfo) -&gt; ProgramResult {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="check_manager"></a>check_manager<a class="hash-link" href="#check_manager" title="Direct link to heading">#</a></h5><p>Checks if the passed manager is the same as the one stored in the state</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn check_manager(&amp;self, manager: &amp;AccountInfo) -&gt; ProgramResult {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="check_maintainer"></a>check_maintainer<a class="hash-link" href="#check_maintainer" title="Direct link to heading">#</a></h5><p>Checks if the passed maintainer belong to the list of maintainers</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn check_maintainer(&amp;self, maintainer: &amp;AccountInfo) -&gt; ProgramResult {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="get_reserve_account"></a>get_reserve_account<a class="hash-link" href="#get_reserve_account" title="Direct link to heading">#</a></h5><p>This function returns the address of the reserve account, i.e. the account where SOL gets deposited to.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn get_reserve_account(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &amp;self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  program_id: &amp;Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  solido_address: &amp;Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; Result&lt;Pubkey, ProgramError&gt; {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="check_reserve_authority"></a>check_reserve_authority<a class="hash-link" href="#check_reserve_authority" title="Direct link to heading">#</a></h5><p>Confirms that the reserve authority passed does in fact belong to this Solido instance.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn check_reserve_authority(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &amp;self,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  program_id: &amp;Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  solido_address: &amp;Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  reserve_authority_info: &amp;AccountInfo,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; Result&lt;Pubkey, ProgramError&gt; {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="validator"></a>Validator<a class="hash-link" href="#validator" title="Direct link to heading">#</a></h3><p>The validator struct maintains the data regarding each validator that is required to generate staking accounts and maintain the fees due.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub struct Validator {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub fee_credit: StLamports,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub fee_address: Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub stake_accounts_seed_begin: u64,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub stake_accounts_seed_end: u64,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub stake_accounts_balance: Lamports,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="implemented-functions-on-validator"></a>Implemented functions on Validator<a class="hash-link" href="#implemented-functions-on-validator" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="find_stake_account_address"></a>find_stake_account_address<a class="hash-link" href="#find_stake_account_address" title="Direct link to heading">#</a></h5><p>This function finds a stake account associated with a given validator vote account.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn find_stake_account_address(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    program_id: &amp;Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    solido_account: &amp;Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    validator_vote_account: &amp;Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    seed: u64,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; (Pubkey, u8) {</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><blockquote><p>This function wraps the Solana <code>Pubkey::find_program_address</code>. That function tries to find a valid program address and its corresponding bump seed which must be passed as an additional seed when calling <code>invoke_signed</code>.
The processes of finding a valid program address is by trial and error,and even though it is deterministic given a set of inputs it can take a variable amount of time to succeed across different inputs.  This means that when called from an on-chain program it may incur a variable amount of the program&#x27;s compute budget.  Programs that are meant to be very performant may not want to use this function because it could take a considerable amount of time.  Also, programs that area already at risk of exceeding their compute budget should also call this with care since there is a chance that the program&#x27;s budget may be occasionally exceeded.</p></blockquote><blockquote><p>Additional Note: The underlying Solana program function will panic in the very unlikely event that the additional seed could not be found.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="feedistribution"></a>FeeDistribution<a class="hash-link" href="#feedistribution" title="Direct link to heading">#</a></h3><p>The FeeDistribution struct simply maintains the ratios of distribution between the treasury, developer (Chorus One), and the validators.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub struct FeeDistribution {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub treasury_fee: u32,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub validation_fee: u32,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub developer_fee: u32,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="feerecipients"></a>FeeRecipients<a class="hash-link" href="#feerecipients" title="Direct link to heading">#</a></h3><p>The FeeRecipients struct is another simple struct that holds the Pubkey addresses of the treasury and developer (Chorus One) accounts that will receive fees.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub struct FeeRecipients {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub treasury_account: Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    pub developer_account: Pubkey,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/development/specification/solido/processor"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Process</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/development/specification/solido/token"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Token Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#constants" class="table-of-contents__link">Constants</a><ul><li><a href="#lido_version" class="table-of-contents__link">LIDO_VERSION</a></li><li><a href="#lido_constant_header_size" class="table-of-contents__link">LIDO_CONSTANT_HEADER_SIZE</a></li><li><a href="#lido_constant_fee_size" class="table-of-contents__link">LIDO_CONSTANT_FEE_SIZE</a></li></ul></li><li><a href="#types" class="table-of-contents__link">Types</a><ul><li><a href="#validators" class="table-of-contents__link">Validators</a></li><li><a href="#maintainers" class="table-of-contents__link">Maintainers</a></li></ul></li><li><a href="#structs" class="table-of-contents__link">Structs</a><ul><li><a href="#lido" class="table-of-contents__link">Lido</a></li><li><a href="#validator" class="table-of-contents__link">Validator</a></li><li><a href="#feedistribution" class="table-of-contents__link">FeeDistribution</a></li><li><a href="#feerecipients" class="table-of-contents__link">FeeRecipients</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.5fa1bcba.js"></script>
<script src="/assets/js/main.9e9a9979.js"></script>
</body>
</html>