"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3110],{3905:function(t,e,a){a.d(e,{Zo:function(){return l},kt:function(){return m}});var n=a(7294);function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function c(t,e){if(null==t)return{};var a,n,o=function(t,e){if(null==t)return{};var a,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(o[a]=t[a]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(o[a]=t[a])}return o}var s=n.createContext({}),u=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):r(r({},e),t)),a},l=function(t){var e=u(t.components);return n.createElement(s.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},p=n.forwardRef((function(t,e){var a=t.components,o=t.mdxType,i=t.originalType,s=t.parentName,l=c(t,["components","mdxType","originalType","parentName"]),p=u(a),m=o,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||i;return a?n.createElement(h,r(r({ref:e},l),{},{components:a})):n.createElement(h,r({ref:e},l))}));function m(t,e){var a=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var i=a.length,r=new Array(i);r[0]=p;var c={};for(var s in e)hasOwnProperty.call(e,s)&&(c[s]=e[s]);c.originalType=t,c.mdxType="string"==typeof t?t:o,r[1]=c;for(var u=2;u<i;u++)r[u]=a[u];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},623:function(t,e,a){a.r(e),a.d(e,{frontMatter:function(){return c},metadata:function(){return s},toc:function(){return u},default:function(){return d}});var n=a(2122),o=a(9756),i=(a(7294),a(3905)),r=["components"],c={},s={unversionedId:"internals/solana-staking",id:"internals/solana-staking",isDocsHomePage:!1,title:"Staking on Solana",description:"This page gives an overview of how staking on Solana works, as background for",source:"@site/docs/internals/solana-staking.md",sourceDirName:"internals",slug:"/internals/solana-staking",permalink:"/internals/solana-staking",version:"current",frontMatter:{},sidebar:"solidoSidebar",previous:{title:"Token",permalink:"/development/specification/solido/token"},next:{title:"Commission",permalink:"/internals/commission"}},u=[{value:"Stake accounts",id:"stake-accounts",children:[]},{value:"Vote accounts",id:"vote-accounts",children:[]}],l={toc:u};function d(t){var e=t.components,a=(0,o.Z)(t,r);return(0,i.kt)("wrapper",(0,n.Z)({},l,a,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This page gives an overview of how staking on Solana works, as background for\nthe following sections on commissions and withdrawals."),(0,i.kt)("h2",{id:"stake-accounts"},"Stake accounts"),(0,i.kt)("p",null,"To stake SOL on Solana, one has to create a ",(0,i.kt)("em",{parentName:"p"},"stake account"),", fund it with some\namount of SOL, and then ",(0,i.kt)("em",{parentName:"p"},"delegate")," the stake account to a ",(0,i.kt)("em",{parentName:"p"},"validator vote\naccount"),".  The balance of a stake account can be split into four states:\n",(0,i.kt)("em",{parentName:"p"},"inactive"),", ",(0,i.kt)("em",{parentName:"p"},"activating"),", ",(0,i.kt)("em",{parentName:"p"},"active"),", and ",(0,i.kt)("em",{parentName:"p"},"deactivating"),". Activating and\ndeactivating stake are mutually exclusive, but a stake account can contain a mix\nof inactive, active, and activating/deactivating stake."),(0,i.kt)("p",null,"Stake on Solana is subject to a warmup and cooldown period. Immediately after\ndelegating, stake transitions from inactive to activating. At the start of the\nnext epoch, a portion of the activating stake transitions to active. In practice\nthe full amount becomes active, but in theory, stake can take more than one\nepoch to warm up, when there is a lot of churn on the network. Stake\ndeactivation works in the same way: immediately after deactivation, stake\ntransitions from active to deactivating, and at the start of the next epoch, a\nportion of the deactivating stake becomes inactive."),(0,i.kt)("p",null,"A stake account has an ",(0,i.kt)("em",{parentName:"p"},"authorized withdrawer"),", which is an address that can\nwithdraw inactive stake from the stake account. Active stake cannot be\nwithdrawn."),(0,i.kt)("p",null,"For the purpose of determining the stake held by a validator, activating stake\nis considered inactive, and deactivating stake is considered active. This means\nthat activating stake incurs no rewards, and deactivating stake does."),(0,i.kt)("p",null,"Because Solana features a complicated rent mechanism, the minimum amount that\ncan be staked, is the rent-exempt balance of a stake account. This amount is\nalways inactive, only funds above this threshold can be activated. However,\nthere used to be ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/solana-labs/solana/issues/18942"},"an issue")," in Solana where stake accounts that\nhold very little stake cannot be merged. Solido requires stake account merging\nto keep the number of stake accounts in check, so stake accounts need a minimum\namount of stake. The exact minimum is not known, but 1 SOL is enough."),(0,i.kt)("h2",{id:"vote-accounts"},"Vote accounts"),(0,i.kt)("p",null,"To operate a validator, you need a ",(0,i.kt)("em",{parentName:"p"},"vote account")," and an ",(0,i.kt)("em",{parentName:"p"},"identity account"),". The\nidentity account contains metadata about the validator, such as its description,\nand the vote account refers to the identity account. Multiple vote accounts can\nrefer to the same identity account, but a ",(0,i.kt)("inlineCode",{parentName:"p"},"solana-validator")," instance can only\nvalidate on behalf of one vote account at a time."),(0,i.kt)("p",null,"A vote account (the things that you delegate a stake account to), specifies a\n",(0,i.kt)("em",{parentName:"p"},"commission percentage"),". Validation rewards get split into a commission part,\nand a delegator part. Commission gets paid into the vote account, and the\nremainder gets paid into the delegating stake account, where it is immediately\nactive.  Because only funds in stake accounts can be staked, rewards paid as\ncommission do not compound automatically, but rewards paid into stake accounts\ndo."),(0,i.kt)("p",null,"Vote accounts have a ",(0,i.kt)("em",{parentName:"p"},"withdraw authority"),": an address that can withdraw funds\nfrom the vote account. The withdraw authority can be different from the vote\naccount itself, or the validator that controls it. For traditional non-pooled\nvalidators, it is set to an address controlled by the validator, usually the\nvote account address itself."))}d.isMDXComponent=!0}}]);